!function(e,t){function n(e){if("number"==typeof e)return e;var t={manual:g,video:g,rotator:b,overroll:w,preroll:P,mobile_fullscreen:E,inread:_,inroll:C};return t[e]||g}function a(){function n(t,n){i&&e.viboomYM&&viboomYM.params({action:t,label:n})}function o(){1!==re._data.platformRegionId||re._data.detected||l.loadScript("//apicaller.ru/",{uid:re.vbmuid})}function s(e,t){var n=re._data;t=t||{},t.key=n.actionKeys[e],t.type=e[0],l.loadScript(n.actionUrl,t,!0)}function c(e){var t=re._data.tracking;t[e]&&([].concat(t[e]).forEach(function(e){l.loadPixel(e)}),delete t[e])}function B(e){l.loadScript(re._data.interruptUrl,{campaignId:re._data.campaignId,event:e},!0)}function R(){var e=re._data;l.loadScript(e.volumeTrackingUrl,{accessId:e.accessId,totalTime:pe,volumeOnTime:fe},!0),pe=0,fe=0}function H(e){var t=re._data,n={accessId:t.accessId,unscored:0|t.unscored,time:e};t.actionKeys.play?ie.push(n):l.loadScript(t.playbackUrl,n,!0)}function F(e,t){if(!t)return void e();var n=setInterval(function(){re.Player.getCurrentTime()>=t&&(e(),clearInterval(n))},100)}function U(t,n){return z("content",t,n),"undefined"!=typeof onVbmContent&&onVbmContent(t,n),n?("undefined"!=typeof onVbmHasContent&&onVbmHasContent(t),void(e.vbmContent=!0)):void("undefined"!=typeof onVbmNoContent&&onVbmNoContent(t))}function z(e,t){var n=[].slice.call(arguments,2);A.forEach(function(a){if(a.name===e)try{a.id?a.id===t&&a.handler.apply(a,n):a.handler.apply(a,[t].concat(n))}catch(r){console.log("vbm event error:",r)}})}function G(e,n){var a=te(b,e);if(a){var r=t.createElement("div");l.insertHtml(n,r),[].slice.call(r.children).forEach(function(e){a.parentNode.insertBefore(e,a)}),a.parentNode.removeChild(a)}}function Y(){var e=re._data,t=e.actionKeys,a=e.elementId,r=e.campaignId,i=e.groupId;$(),le=setInterval(function(){var o=re.Player.getCurrentTime(),d=re.Player.getDurationTime();t.start&&(s("start"),delete t.start,n("play","campaign_"+r),re.nextCount>0&&n("nextVideoPlay","campaign_"+r)),t.play&&o>=e.playDelay&&(s("play",{vbmuid:re.vbmuid}),delete t.play,n("playPay","campaign_"+r),r&&j.list("played").touch(r),i&&j.map("played_snap").list(i).push(Math.round(Date.now()/1e3),5),ie.forEach(function(t){l.loadScript(e.playbackUrl,t,!0)}),z("playerPlay",a),"undefined"!=typeof onVbmPlayerPlay&&onVbmPlayerPlay.call(null,a),c("playUrl")),!t.play&&t.finish&&Math.ceil(o+1)>=Math.ceil(d)&&(s("finish"),delete t.finish,n("playToEnd","campaign_"+r),c("playEndUrl")),o/d>=.25&&(c("firstQuartileUrl"),n("firstQuartile","campaign_"+r)),o/d>=.5&&(c("midpointUrl"),n("midpoint","campaign_"+r)),o/d>=.75&&(c("thirdQuartileUrl"),n("thirdQuartile","campaign_"+r))},100)}function $(){le&&clearInterval(le)}function J(){var e=re._data,t=e.playbackData;se=setInterval(function(){t.length>0&&Math.ceil(re.Player.getCurrentTime()+1)>=t[0]&&H(t.shift()),e.volumeTrackingUrl&&(pe+=100,fe+=re.Player.getVolume()?100:0,pe%1e3===0&&R())},100)}function q(){se&&clearInterval(se)}function W(){var e=re._data,t=e.elementId;delete M[e.elementId];var n=re._wrapper.parentNode;n&&(n.replaceChild(re._target,re._wrapper),z("playerSkip",t),"undefined"!=typeof onVbmPlayerSkipped&&onVbmPlayerSkipped.call(null,t),$(),q(),(e.format===w||e.format===P)&&l.forEachChildrens(re._target,function(e){"iframe"===e.tagName.toLowerCase()&&(e.src=e.src+(-1!==e.src.indexOf("?")?"&":"?")+"autoplay=1")}))}function K(){var e=re._skipButton;null===e.remaning&&(e.remaning=re._data.playDelay);var t=function(){e.element.style.display="block",e.remaning<1?(e.element.innerHTML=re._data.translates[0],e.element.className="clickable",Q(),l.addListener(e.element,"click,touchstart",W)):e.element.innerHTML=re._data.translates[1].replace("%remaning%",e.remaning),--e.remaning};t(),e.timer=setInterval(t,1e3)}function Q(){var e=re._skipButton.timer;e&&clearInterval(e)}function X(e,n){var a=t.createElement("div");a.id=re._wrapperId,a.className="vbm-wrapper";var r=t.createElement("div");return r.id=re._playerId,r.className="vbm-player",r.style.width=l.toCssSize(n.width),r.style.height=l.toCssSize(n.height),e.parentNode.replaceChild(a,e),a.appendChild(r),r.appendChild(e),r}function Z(){var e=re._data,t=re._target,n=null;switch(e.format){case g:case _:case b:case E:n={width:e.width,height:e.height};break;case C:var a=t.offsetWidth||e.width;n={width:a,height:a*(481/854)};break;case w:case P:var r=0,i=0;[].slice.call(t.children).forEach(function(e){var t=e.offsetWidth||0|e.width,n=e.offsetHeight||0|e.height;t>r&&(r=t),n>i&&(i=n)}),n={width:r||t.offsetWidth,height:i||t.offsetHeight};break;default:throw"unknown player format"}return e.sourceType===S&&(n.width<400&&(n.width=400),n.height<300&&(n.height=300)),n.width=n.width||640,n.height=n.height||360,n}function ee(e,n){function a(){r.removeChild(i),n()}var r=e.parentNode,i=t.createElement("div");i.className="vbm-layout",l.addListener(i,"click,touchstart",a),r.insertBefore(i,e)}function te(e,n){switch(e){case g:case b:case E:case _:case C:var a=t.getElementById("v-"+n);return a?a:(a=t.getElementById("s-"+n))?a:(a=l.getElementByInnerText("script",n),a?a:l.getElementBySrc("script",n));case w:case P:var r=e===w||re._data.switchPreroll?ve:me,i=l.getElementByClassName("div",r);if(!i)throw"viboom: "+e+" class(."+r+")  not found";return i.id=l.getGuid(),i;default:throw"viboom: unknown format "+e}}function ne(){var n=re._data.stopwords||[];if(0===n.length)return!1;var a=t.body.innerHTML;try{a=e.top.document.body.innerHTML}catch(r){}a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi," "),a=a.replace(/(<([^>]+)>)/gi," "),a=a.replace(/\s+/g," ");var i={template:"[^a-zа-яё](TARGET)[^a-zа-яё]",get:function(e){var t=this.template.replace("TARGET",e);return new RegExp(t,"i")}},o=[];return n.forEach(function(e){e=e.replace(/\s+/g," ");var t=a.match(i.get(e));t&&(console.log("viboom: stopword "+e+" founded"),o.push(e))}),0!==o.length?o.slice(0,20):!1}function ae(){ce&&clearInterval(ce),re._wrapper.style.height="0",setTimeout(W.bind(re),500)}var re=this,ie=[],oe=!1,le=null,se=null,ce=null,de=!1,ue=!1,pe=0,fe=0,ve="viboom-overroll",me="viboom-preroll";re.Player=null,re.Util=l,re._params=null,re._data=null,re._wrapperId=l.getGuid(),re._playerId=l.getGuid(),re._target=null,re._wrapper=null,re._player=null,re._playerSize=null,re._skipButton={id:l.getGuid(),element:null,timer:null,remaning:null},re.nextCount=0,re.onNext=function(){},re.init=function(t){re._data=t;var n=t.campaignId,a=t.accessId,r=ne();if(""!==e.location.pathname.substr(1)&&r)return void(re._data.format!==g&&(V.push(a),l.loadScript(t.blockedUrl,{accessId:a,url:location.href,words:r},!0),n&&j.list("viewed").kick(n),re.getContent(re._params)));var i=M[t.elementId];if(i&&console.log("viboom: target "+t.elementId+" already used by "+i.format),M[t.elementId]=t,++O,!(e.vbmSs&&O>1)){var o=te(t.format,t.elementId);if(re._target=o,!o)return void console.log("viboom: not found target for "+t.format);if(t.format===E){if(D)return void console.log("viboom: "+E+" has already been shown");D=!0,j.set("fullscreen_ts",Date.now())}var s=Z();switch(re._playerSize=s,re._player=X(o,s),re._wrapper=re._player.parentNode,t.sourceType){case k:re.Player=new m;break;case S:re.Player=new y;break;case T:re.Player=t.isMobile?new v:new f;break;case x:re.Player=new u;break;case I:re.Player=new d;break;case L:re.Player=new p;break;case N:re.Player=new h;break;default:throw"unknown source_type"}l.onCSSLoaded("vbm-css-marker",function(){t.format===_||t.format===b&&"expand"===t.rotatorType?l.onViewport(re._player,function(e,t){re.initPlayer(o,s),t()}):t.format===C?re.initInroll(s,function(){re.initPlayer(o,s)}):t.format===P||t.format===w&&"embeded"===t.overrollType?ee(o,function(){re.initPlayer(o,s)}):t.format===E?re.initFullscreen(s,function(){re.initPlayer(o,s)}):re.initPlayer(o,s)})}},re.initPlayer=function(e,t){var r=re._data,i=r.elementId,d=r.campaignId,u=r.actionKeys;re._player.style.background="#000",re.Player.addEventListener("onPlayerReady",function(){l.onViewport(re._player,function(e,t){u.view&&(s("view"),delete u.view,d&&j.list("viewed").kick(d),n("view","campaign_"+d),-1!==[2253,11725].indexOf(r.campaignId)&&r.groupId&&j.map("viewed_snap").list(r.groupId).push(Math.round(Date.now()/1e3),5)),t()}),r.format!==P||r.ss||re.Player.play(),r.format!==P&&r.format!==C&&r.title.length>0&&re.addTitle(),r.format!==w&&r.format!==P&&r.caption.length>0&&re.addCaption(t),r.poweredBy&&re.addPoweredBy(),r.promotion&&re.addPromotion(),re.addSocialButtons(),re.addInteractiveButton(),re.Player.addEventListenerOnce("onPlayerStart",function(){re.addTextLink(),re.addInteractivePicture(),re.addOverlayLink()}),(r.format===w||r.format===P)&&(re.addSkipButton(),re.Player.addEventListener("onPlayerStart",setTimeout.bind(null,K,300)),re.Player.addEventListener("onPlayerStop",Q),re.Player.addEventListener("onPlayerFinish",setTimeout.bind(null,W,300))),r.format===E&&re.Player.addEventListener("onPlayerFinish",re.skipFullscreen),c("viewUrl"),re.Player.addEventListenerOnce("onPlayerStart",o),re.Player.addEventListener("onPlayerStart",function(){oe=!0,de&&!ue&&(B("resume"),ue=!0)}),re.Player.addEventListener("onPlayerStop",function(){oe=!1,de||(B("pause"),de=!0)}),re.Player.addEventListener("onPlayerFinish",function(){de||ue||(B("permanently"),ue=!0)}),re.Player.addEventListener("onPlayerStart",J),re.Player.addEventListener("onPlayerStop",q),re.Player.addEventListener("onPlayerStart",Y),re.Player.addEventListener("onPlayerStop",$)}),(r.format===b||r.format===_)&&re.Player.addEventListenerOnce("onPlayerFinish",function(){console.log("next >> ");var e=new a;e.nextCount++,e.onNext=function(){W(),n("nextVideoOpen","campaign_"+d)},e.getContent(re._params)}),re.Player.addEventListener("onPlayerSkip",W),re.Player.addEventListener("onPlayerReady",function(){z("playerReady",i),"undefined"!=typeof onVbmPlayerReady&&onVbmPlayerReady.call(null,i)}),re.Player.addEventListener("onPlayerStart",function(){z("playerStart",i),"undefined"!=typeof onVbmPlayerStart&&onVbmPlayerStart.call(null,i)}),re.Player.addEventListener("onPlayerStop",function(){z("playerStop",i),"undefined"!=typeof onVbmPlayerStop&&onVbmPlayerStop.call(null,i)}),re.Player.addEventListener("onPlayerFinish",function(){z("playerFinish",i),"undefined"!=typeof onVbmPlayerFinish&&onVbmPlayerFinish.call(null,i)}),re.Player.addEventListener("onPlayerError",function(e){z("playerError",i,e),"undefined"!=typeof onVbmPlayerError&&onVbmPlayerError.call(null,i,e)}),re.Player.init({target:e,videoId:r.sourceId,width:t.width,height:t.height,cdnDomain:r.cdnDomain,hostingUrl:r.videoHostingUrl,previewUrl:r.previewUrl,format:r.format,quality:r.format===E?"medium":null,playDelay:r.playDelay,duration:r.duration,platformType:r.platformType,ss:r.ss})},re.addOverlayLink=function(n){var a=re._data.isMobile;if(re._overlayLink&&(re._overlayLink.parentNode.removeChild(re._overlayLink),delete re._overlayLink),n=n||re._data.playerInteractive.overlayLink,n&&n.url){var r=t.createElement("div");r.className="vbm-overlay-link",r.innerHTML='<div class="vbm-overlay-link-hint"></div>',re._overlayLink=r;var i=r.firstChild;return i.innerHTML=a?'Узнать больше <div class="vbm-overlay-link-more"></div>':"Кликните на видео для перехода на сайт рекламодателя",l.addListener(r,"click",function(t){e.open(n.url,"_blank")}),re._player.appendChild(r),r}},re.addTitle=function(){var e=re._data.title;if(0!==e.length){var n=t.createElement("div");n.className="vbm-title",n.innerHTML="<div>"+e+"</div>",re._player.appendChild(n),re.Player.addEventListener("onPlayerStart",function(){n.style.display="none"}),re.Player.addEventListener("onPlayerStop",function(){n.style.display="block"})}},re.addCaption=function(e){var n=re._data,a=n.caption;a=a.replace(/(\r\n|\n|\r)/gm,"<br />");var r=t.createElement("div");r.style.width=e.width,r.innerHTML=a;var i=re._player;"top"===n.captionAlign?(r.style.marginBottom="5px",i.parentNode.insertBefore(r,i)):"bottom"===n.captionAlign&&(r.style.marginTop="5px",i.parentNode.appendChild(r))},re.addPoweredBy=function(){var e=t.createElement("div");e.className="vbm-poweredby",e.innerHTML="POWERED BY VIBOOM",re._player.appendChild(e)},re.addPromotion=function(){var e=t.createElement("div");e.className="vbm-promotion",e.innerHTML="PROMOTION",re._player.appendChild(e)},re.addInteractivePicture=function(n){var a=re._interactivePicture;if(a&&(a.parentNode&&a.parentNode.removeChild(a),delete re._interactivePicture),n=n||re._data.playerInteractive.picture){a=t.createElement("img"),a.id=l.getGuid(),a.src=n.src,re._interactivePicture=a;var r={position:"absolute",border:"none",cursor:"pointer"};n.left&&(r.left=n.left),n.right&&(r.right=n.right),n.top&&(r.top=n.top),n.bottom&&(r.bottom=n.bottom),n.width&&(r.width=n.width),n.height&&(r.height=n.height),n.top||n.bottom||(r.bottom=0),n.left||n.right||(r.right=0),n.width||n.height||(r.width="25%");var i={};i["#"+a.id]=r,l.createStyleElement(i,t.head),re._player.appendChild(a),l.addListener(a,"click",function(){e.open(n.url,"_blank")}),l.addListener(a,"error",function(){a.parentNode.removeChild(a)})}},re.addInteractiveButton=function(n){var a=re._interactiveButton;if(a&&(a.parentNode&&a.parentNode.removeChild(a),delete re._interactiveButton,re._wrapper.style.paddingBottom="0px"),n=n||re._data.playerInteractive.button){a=t.createElement("div"),re._interactiveButton=a,a.id=l.getGuid(),a.style.display="none";var r=parseInt(n.time_show)||0,i=parseInt(n.time_hide)||0;F(function(){a.style.display="none",re._wrapper.style.paddingBottom="0px",re._player.style.marginBottom="0px"},i),F(function(){a.style.display="block",re._wrapper.style.paddingBottom="40px",re._player.style.marginBottom="40px"},r),re._player.appendChild(a);var o={};o["#"+a.id]={position:"absolute",bottom:"-40px",backgroundColor:"#1b1b1b",fontFamily:"Arial",fontSize:"12px",lineHeight:"14px",width:"100%",height:"40px",textAlign:"left",verticalAlign:"middle"},o["#"+a.id+" > .vbm-descr"]={color:"#fff",display:"table-cell",height:"40px",padding:"0px 5px 0px 10px",verticalAlign:"middle"},o["#"+a.id+" > .vbm-btn"]={color:"#fff",display:"table-cell",height:"40px",verticalAlign:"middle",paddingLeft:"6px"},a.innerHTML='<div class="vbm-btn"></div><div class="vbm-descr"></div>';var s=a.childNodes[0],c=a.childNodes[1];if(n.subscribe)l.loadScript("https://apis.google.com/js/platform.js"),s.innerHTML='<div class="g-ytsubscribe" data-channelid="'+n.subscribe+'" data-layout="default" data-count="default"></div>';else if(n.subscribe_fb)!function(e,t,n){var a,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5",r.parentNode.insertBefore(a,r))}(t,"script","facebook-jssdk"),s.innerHTML='<div class="fb-like" data-href="https://www.facebook.com/'+n.subscribe_fb+'" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>',"undefined"!=typeof FB&&FB.XFBML.parse(re._wrapper);else if(n.subscribe_vk){l.loadScript("https://vk.com/js/api/openapi.js?121");var d=setInterval(function(){if("undefined"!=typeof VK){var e="vk_subscribe_"+Date.now();s.innerHTML='<div class="vbm-btn-vk"><div id="'+e+'"></div><div>',VK.Widgets.Subscribe(e,{mode:1,soft:0},n.subscribe_vk),clearInterval(d)}},100)}else{var u=t.createElement("button");s.appendChild(u),u.innerText=u.textContent=n.text||"";var p="#"+a.id+" button";o[p]=o[p+":hover"]={display:"inline-block",backgroundImage:"none",padding:"0px",textShadow:"none",boxShadow:"none",backgroundColor:"#f13434",color:"#fff",fontFamily:"Arial",fontSize:"14px",lineHeight:"12px",width:"135px",height:"30px",border:"none",borderRadius:"3px",cursor:"pointer",overflow:"hidden"},l.addListener(a,"click",function(){e.open(n.url,"_blank")})}l.createStyleElement(o,t.head),c.innerText=c.textContent=n.description||""}},re.addTextLink=function(n){var a=re._textLink;a&&(a.parentNode.removeChild(a),delete re._textLink),n=n||re._data.playerInteractive.textLink,n&&n.text&&n.url&&(a=t.createElement("div"),re._textLink=a,a.className="vbm-textlink",a.innerHTML=n.text.toUpperCase(),8448==re._data.campaignId&&(a.className+=" vbm-textlink-right"),l.addListener(a,"click",function(){e.open(n.url,"textLink")}),re._player.appendChild(a))},re.addSocialButtons=function(n){var a=re._socialButtons;if(a&&(a.parentNode.removeChild(a),delete re._socialButtons),n=n||re._data.playerInteractive.socialButtons,n&&0!==n.length){var i=re._playerSize,o=50;if(!(o/i.width>.2)){var s=l.getGuid(),c={};c["#"+s]={zIndex:"2147483647",position:"absolute",top:"30px",left:"10px"},c["#"+s+" .vbm-soc-btn"]={cursor:"pointer",marginTop:"5px",background:"url("+r+"/social-buttons.png) no-repeat",width:"40px",height:"40px",opacity:"0.5"},c["#"+s+" .vbm-soc-btn:hover"]={opacity:1};var d={fb:16,vk:66,tw:116,ok:166,ig:216,st:266,yt:316,oz:366};for(var u in d)(function(e,t){var n="#"+s+" .vbm-soc-btn.vbm-soc-btn-"+t;c[n]={backgroundPosition:"-13px -"+e+"px"},c[n+":hover"]={backgroundPosition:"-66px -"+e+"px"}})(d[u],u);l.createStyleElement(c,t.head),a=t.createElement("div"),re._socialButtons=a,a.id=s;for(var p in n)(function(r,s){function c(){var t;switch(!0){case-1!==this.dataset.url.indexOf("http://vk.com/share.php"):case-1!==this.dataset.url.indexOf("http://odnoklassniki.ru/dk?st.cmd=addShare"):case-1!==this.dataset.url.indexOf("http://facebook.com/sharer.php"):case-1!==this.dataset.url.indexOf("http://twitter.com/intent/tweet"):t="width=600,height=280,status=no,resizable=no,top=200,left=200"}e.open(this.dataset.url,u,t)}if(n.hasOwnProperty(s)){var d=re._data.playerInteractive.textLink?1:0;if(!(a.children.length*o>i.height-30-40-80*d)){var u=r.type,p=r.url,f=parseInt(r.time_show)||0,v=parseInt(r.time_hide)||0,m=t.createElement("div");m.style.display="none",m.className="vbm-soc-btn vbm-soc-btn-"+u,m.dataset.url=p,F(function(){m.style.display="none"},v),F(function(){m.style.display="block"},f),l.addListener(m,"click,touchstart",c),a.appendChild(m)}}})(n[p],p);re._player.appendChild(a)}}},re.addSkipButton=function(){var e=re._skipButton;e.element=t.createElement("button"),e.element.id=e.id,e.element.innerHTML=re._data.translates[0];var n={},a="#"+e.id;n[a]={cursor:"default",position:"absolute",display:"none",bottom:"55px",right:"0px",padding:"10px",fontSize:"12px",background:"#000",border:"2px solid #fff",outline:"none",color:"#fff",textDecoration:"none",maxWidth:"250px",opacity:"0.75"},n[a+":hover"]={textDecoration:"none"},n[a+".clickable"]={cursor:"pointer"},n[a+".clickable:hover"]={borderColor:"#fc0"},l.createStyleElement(n,t.head),re._player.appendChild(e.element)},re.initFullscreen=function(n,a){function r(t){o.style.width=e.innerWidth+"px",o.style.height=e.innerHeight+"px";var a=.9,r=.95,i=Number(n.width),l=Number(n.height)+d.offsetHeight+2*m,s=e.innerWidth/i*a,p=e.innerHeight/l*r,f=p>s?s:p;c.scale&&Math.abs(1-(c.scale||0)/f)<.05||(c.scale=f,c.style.zoom=u.style.zoom=f,c.style.MozTransform=u.style.MozTransform="scale("+f+")")}var i=re._data;console.log("viboom: init mobile fullscreen");var o=t.createElement("div"),s=t.createElement("div"),c=t.createElement("div"),d=t.createElement("div"),u=t.createElement("div"),p=null,f=l.detectBrowser(),v=t.createElement("meta");v.name="viewport",v.content="minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0","Firefox"!==f&&t.head.appendChild(v),"Safari"===f&&(p=setInterval(e.scrollTo.bind(e,0,0),300)),t.body.appendChild(o),o.appendChild(s),s.appendChild(c),c.appendChild(d),c.appendChild(re._wrapper),s.appendChild(u);var m=30;o.className="vbm-mfs",s.className="vbm-mfs-cell",c.className="vbm-mfs-content",d.className="vbm-mfs-title",d.innerHTML=i.title,d.style.width=n.width+"px",d.style.marginBottom=m+"px",u.className="vbm-mfs-skip",u.innerHTML="×",re.skipFullscreen=function(){clearInterval(y),p&&clearInterval(p),W(),o.parentNode.removeChild(o),v.content=""},l.addListener(u,"click",function(){re.skipFullscreen(),i.skipUrl&&l.loadPixel(i.skipUrl)}),r();var y=setInterval(r,300);l.addListener(e,"orientationchange,resize,touchend",r),a&&a()},re.initInroll=function(n,a){var r=re._data,i=re._data.isMobile,o=re._wrapper,s=re._player,c=t.createElement("div");c.className="vbm-inroll-header",c.innerHTML=['<div class="vbm-inroll-close" title="Закрыть видео"></div>','<div class="vbm-inroll-msg">реклама</div>','<a class="vbm-inroll-logo" target="_blank" href="http://viboom.com" title="Вибум"></a>'].join("");var d=c.firstChild;l.addListener(d,"click,touchstart",function(){r.skipUrl&&l.loadPixel(r.skipUrl),ae()}),s.parentNode.insertBefore(c,s),o.className+=" vbm-inroll",i&&(o.className+=" vbm-inroll-mobile",n.height>400?o.className+=" vbm-inroll-xxl":n.height>300&&(o.className+=" vbm-inroll-xl"));var u=re.addOverlayLink();re.Player.addEventListener("onPlayerReady",function(){function a(){o.style.height=d+"px"}var d=c.offsetHeight+n.height;if(d+=i&&u?u.offsetHeight:0,r.ss)return re.Player.player.play(),setTimeout(function(){re.Player.player.pause()},2e3),a();if(l.onViewport(s,function(e,t){a(),t()}),ce=l.onViewport(s,1,function(e){var n=t.hasFocus?t.hasFocus():!0;!n&&oe?re.Player.pause():!oe&&n&&re.Player.play()},function(){oe&&re.Player.pause()}),re.Player.mute(!0),!i){var p=!1;l.addListener(s,"mouseover,mouseout",function(e){p||re.Player.fluentMute("mouseout"===e.type)}),l.addListener(re.Player.player.controlBar.muteToggle.el_,"click",function(){p=!0})}l.addListener(e,"orientationchange",function(){setTimeout(function(){s.style.display="none",o.style.zoom=1,o.style.zoom=o.offsetWidth/n.width,s.style.display=""},300)}),re.Player.addEventListener("onPlayerFinish",ae)}),a&&a()},re.on=function(e,t){var n={id:re._data.elementId,name:e,handler:t};return A.push(n),n},re.once=function(e,t){var n=re.on(e,t);n.handler=function(){var e=A.indexOf(n);e>-1&&A.splice(e,1),t.apply(this,arguments)}},re.getContent=function(t){re._params=t;var n=0;re.vbmuid=l.isHash32(j.get("vbmuid"))||l.isHash32(""),console.time("uid time "+re._wrapperId),l.getJSONP("//level1cdn.com/uid/",{uid:re.vbmuid},function(a){var i=a instanceof Error?a:null;i||(re.vbmuid=l.isHash32(a)),console.timeEnd("uid time "+re._wrapperId),re.vbmuid||(re.vbmuid=l.md5(""+Date.now()+Math.random()),n=1),j.set("vbmuid",re.vbmuid);var s="";try{s=e.top.location.href}catch(c){s=e.location.href}t.vbmuid=re.vbmuid,t.data=JSON.stringify({fullscreen_ts:j.get("fullscreen_ts"),played:j.get("played"),viewed:j.get("viewed"),played_snap:j.get("played_snap"),viewed_snap:j.get("viewed_snap"),shown:V,referer:s,n:n}),l.getJSONP(r+"/video/get/",t,function(e){return"onVbmNoContent"===e.event?(U(e.elementId,!1),void(e.rotatorPassback&&0===re.nextCount&&G(e.elementId,e.rotatorPassback))):(re.nextCount>0&&re.onNext(e.accessId),U(e.elementId,e.campaignId),re.init(e),void o())},{callback:"sig"})},{timeout:1e3})},re.detectPlace=function(e,n,a){if(!a)return re.getContent(n);var r=a.container,i=a.className;if(!r)return void console.log("viboom: cant find container for player");var o=a.position,s=o.match(/(\w+)(\d+)/),c=s[1],d=0|s[2],u=r.getElementsByTagName(c),p=u[d-1],f=t.createElement("div");f.className=i||"";var v=t.createElement("div");v.id="v-"+e,f.appendChild(v),p?l.insertAfter(f,p):(console.log("viboom: cant find "+o),r.appendChild(f)),re.getContent(n)}}e.vbm=e.vbm||function(){};var r="http://r1.yaplakal.com",i=true,o=false;if(!e.VbmVideo){var l={abstractMethod:function(){throw"You must implement abstractMethod"},inherits:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass_=t.prototype},appendCSS:function(e){var n=t.createElement("style");n.innerHTML=e,t.head.appendChild(n)},createStyleElement:function(e,n){var a=t.createElement("style");if(a.type="text/css","object"==typeof e&&(e=this.stylesToCssString(e)),a.styleSheet)a.styleSheet.cssText=e;else{var r=t.createTextNode(e);a.appendChild(r)}return n&&n.appendChild(a),a},stylesToCssString:function(e){var t,n,a,r,i;i="";for(t in e){n=e[t],i+=t+" {";for(a in n)r=n[a],a=a.replace(/[a-z][A-Z]/,function(e){return e.split("").join("-")}),i+=a+" : "+r+";";i+="} "}return i},toCssSize:function(e){return String(e).replace(/([^\%])$/,"$1px")},addClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.test(e.className)||(e.className=(e.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""))},removeClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},loadScript:function(e,n,a){2===arguments.length&&(a=!1),n&&(e+=this.stringifyParams(n,a));var r=t.createElement("script");r.src=e,r.async=!0,r.vbm=!0;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)},getJSONP:function(t,n,a,r){r=r||{},n=n||{};var i=r.callback||"callback",o=n[i]||this.getGuid();n[i]=o;var l=null;r.timeout&&(l=setTimeout(function(){a(new Error("timeout")),e[o]=function(){}},r.timeout)),e[o]=function(){l&&clearTimeout(l),a.apply(null,arguments)},this.loadScript(t,n,r.sig)},loadPixel:function(e,n,a){var r=t.createElement("img");n&&(e+=this.stringifyParams(n,a)),r.src=e,r.width=1,r.height=1,r.style.position="absolute",r.style.left="-99px",r.style.top="0px",r.style.display="block",r.style.border="none",t.body.appendChild(r)},loadTNSPixel:function(){var e="//www.tns-counter.ru/V13a***R>[referrer]*[site_name]/ru/[CP1251]/tmsec=[section_name]/[random_number]".replace(/\[referrer\]/g,encodeURIComponent(location.href.replace(/\*/g,"%2a"))).replace(/\[site_name\]/g,"viboom_com").replace(/\[CP1251\]/g,"CP1251").replace(/\[section_name\]/g,"viboom_total").replace(/\[random_number\]/g,Math.round(1e6*Math.random()));l.loadPixel(e)},initGA:function(){!function(e,t,n,a,r,i,o){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=t.createElement(n),o=t.getElementsByTagName(n)[0],i.async=1,i.src=a,o.parentNode.insertBefore(i,o)}(e,t,"script","//www.google-analytics.com/analytics.js","viboomGa"),viboomGa("create","UA-57015589-1","auto"),viboomGa("send","pageview")},initYM:function(){!function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.viboomYM=new Ya.Metrika({id:36124145,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})}catch(e){}});var a=e.getElementsByTagName("script")[0],r=e.createElement("script"),i=function(){a.parentNode.insertBefore(r,a)};r.type="text/javascript",r.async=!0,r.src="https://mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",i,!1):i()}(t,e,"yandex_metrika_callbacks")},stringifyParams:function(e,t){var n=[];t===!0&&(e.sig=this.getSig(e));for(var a in e)e.hasOwnProperty(a)&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return"?"+n.join("&")},loadCSS:function(e){var n=t.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t.getElementsByTagName("head")[0].appendChild(n)},insertAfter:function(e,t){var n=t.parentNode,a=t.nextSibling;return a?n.insertBefore(e,a):n.appendChild(e)},getElementBySrc:function(e,n){for(var a=t.getElementsByTagName(e),r=0,i=a.length;i>r;r++)if(-1!==a[r].src.search(n)&&!a[r].vbm)return a[r];return null},getElementByInnerText:function(e,n){for(var a=t.getElementsByTagName(e),r=0,i=a.length;i>r;r++){var o=a[r].innerText||a[r].textContent;if(-1!==o.search(n))return a[r]}return null},getElementByClassName:function(e,n){if(!t.getElementsByClassName)return function(){for(var a=t.getElementsByTagName(e),r=0,i=a.length;i>=r;r++)if(a[r].className===n)return a[r];return null}();var a=t.getElementsByClassName(n);return a[0]?a[0]:null},detectBrowser:function(){var n={};n.Opera=!!e.opera||navigator.userAgent.indexOf(" OPR/")>=0,n.Firefox="undefined"!=typeof InstallTrigger,n.Safari=Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0,n.Chrome=!!e.chrome&&!n.Opera,n.IE=!!t.documentMode;for(var a in n)if(n[a])return a},getFlashVersion:function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return"0,0,0"},forEachChildrens:function(e,t){[].slice.call(e.children).forEach(function(e,n){t(e,n),l.forEachChildrens(e,t)})},insertHtml:function(e,n){n.innerHTML=e;for(var a=n.getElementsByTagName("script"),r=0,i=a.length;i>r;r++){var o=t.createElement("script");[].slice.call(a[r].attributes).forEach(function(e){o.setAttribute(e.name,e.value)}),o.innerHTML=a[r].innerHTML,a[r].parentNode.replaceChild(o,a[r])}return n},getPosition:function(e){var t=0,n=0;if(e.getBoundingClientRect){var a=e.getBoundingClientRect();t=a.left,n=a.top}else for(;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}},isInViewport:function(t){var n=0,a=l.getPosition(t),r=t.offsetHeight,i=a.y-e.innerHeight,o=a.y+r;return i=0>=i?Math.abs(i/r):!1,o=o>=0?Math.abs(o/r):!1,i&&o&&(n=1>=i?i:o,n=n>1?1:n),n},onViewport:function(e,t,n,a){function r(){n=null}function i(){a=null}"function"==typeof t&&(a=n,n=t,t=.001);var o=setInterval(function(){var s=l.isInViewport(e);s>=t?n?n(s,r):r():a?a(s,i):i(),n||a||clearInterval(o)},100);return o},onCSSLoaded:function(e,n){function a(){var e=getComputedStyle(r).zIndex;777==e&&(n&&n(),clearInterval(i))}var r=t.getElementById(e);r||(r=t.createElement("div"),r.id=e,r.style.position="absolute",r.style.display="none",t.body.appendChild(r));var i=setInterval(a,10);a()},getGuid:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return String.fromCharCode(97+Math.floor(25*Math.random()))+e()+e()+e()+e()},addListener:function(e,t,n){t=t.split(",");for(var a in t)e.addEventListener?e.addEventListener(t[a],n,!1):e.attachEvent("on"+t[a],n,!1)},getSig:function(e){var t=[],n=["sig","vbmuid","data"];e=this.sortByKey(e);for(var a in e)-1===n.indexOf(a)&&t.push(a+"="+e[a]);return this.md5(t.join(";")+"78701cd770d0d42").substr(16)},sortByKey:function(e){var t=[];for(var n in e)t.push(n);t.sort();for(var a={},r=0;r<t.length;r++)a[t[r]]=e[t[r]];return a},isHash32:function(e){return"string"==typeof e&&32===e.length?e:!1},md5:function(e){var t,n,a,r,i,o,l,s,c,d=function(e,t){return e<<t|e>>>32-t},u=function(e,t){var n,a,r,i,o;return r=2147483648&e,i=2147483648&t,n=1073741824&e,a=1073741824&t,o=(1073741823&e)+(1073741823&t),n&a?2147483648^o^r^i:n|a?1073741824&o?3221225472^o^r^i:1073741824^o^r^i:o^r^i},p=function(e,t,n){return e&t|~e&n},f=function(e,t,n){return e&n|t&~n},v=function(e,t,n){return e^t^n},m=function(e,t,n){return t^(e|~n)},y=function(e,t,n,a,r,i,o){return e=u(e,u(u(p(t,n,a),r),o)),u(d(e,i),t)},h=function(e,t,n,a,r,i,o){return e=u(e,u(u(f(t,n,a),r),o)),u(d(e,i),t)},g=function(e,t,n,a,r,i,o){return e=u(e,u(u(v(t,n,a),r),o)),u(d(e,i),t)},b=function(e,t,n,a,r,i,o){return e=u(e,u(u(m(t,n,a),r),o)),u(d(e,i),t)},w=function(e){for(var t,n=e.length,a=n+8,r=(a-a%64)/64,i=16*(r+1),o=Array(i-1),l=0,s=0;n>s;)t=(s-s%4)/4,l=s%4*8,o[t]=o[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,o[t]=o[t]|128<<l,o[i-2]=n<<3,o[i-1]=n>>>29,o},P=function(e){var t,n,a="",r="";for(n=0;3>=n;n++)t=e>>>8*n&255,r="0"+t.toString(16),a+=r.substr(r.length-2,2);return a},E=Array(),_=7,C=12,k=17,S=22,T=5,x=9,I=14,L=20,N=4,B=11,M=16,O=23,A=6,V=10,D=15,j=21;for(e=this.utf8_encode(e),E=w(e),o=1732584193,l=4023233417,s=2562383102,c=271733878,t=0;t<E.length;t+=16)n=o,a=l,r=s,i=c,o=y(o,l,s,c,E[t+0],_,3614090360),c=y(c,o,l,s,E[t+1],C,3905402710),s=y(s,c,o,l,E[t+2],k,606105819),l=y(l,s,c,o,E[t+3],S,3250441966),o=y(o,l,s,c,E[t+4],_,4118548399),c=y(c,o,l,s,E[t+5],C,1200080426),s=y(s,c,o,l,E[t+6],k,2821735955),
l=y(l,s,c,o,E[t+7],S,4249261313),o=y(o,l,s,c,E[t+8],_,1770035416),c=y(c,o,l,s,E[t+9],C,2336552879),s=y(s,c,o,l,E[t+10],k,4294925233),l=y(l,s,c,o,E[t+11],S,2304563134),o=y(o,l,s,c,E[t+12],_,1804603682),c=y(c,o,l,s,E[t+13],C,4254626195),s=y(s,c,o,l,E[t+14],k,2792965006),l=y(l,s,c,o,E[t+15],S,1236535329),o=h(o,l,s,c,E[t+1],T,4129170786),c=h(c,o,l,s,E[t+6],x,3225465664),s=h(s,c,o,l,E[t+11],I,643717713),l=h(l,s,c,o,E[t+0],L,3921069994),o=h(o,l,s,c,E[t+5],T,3593408605),c=h(c,o,l,s,E[t+10],x,38016083),s=h(s,c,o,l,E[t+15],I,3634488961),l=h(l,s,c,o,E[t+4],L,3889429448),o=h(o,l,s,c,E[t+9],T,568446438),c=h(c,o,l,s,E[t+14],x,3275163606),s=h(s,c,o,l,E[t+3],I,4107603335),l=h(l,s,c,o,E[t+8],L,1163531501),o=h(o,l,s,c,E[t+13],T,2850285829),c=h(c,o,l,s,E[t+2],x,4243563512),s=h(s,c,o,l,E[t+7],I,1735328473),l=h(l,s,c,o,E[t+12],L,2368359562),o=g(o,l,s,c,E[t+5],N,4294588738),c=g(c,o,l,s,E[t+8],B,2272392833),s=g(s,c,o,l,E[t+11],M,1839030562),l=g(l,s,c,o,E[t+14],O,4259657740),o=g(o,l,s,c,E[t+1],N,2763975236),c=g(c,o,l,s,E[t+4],B,1272893353),s=g(s,c,o,l,E[t+7],M,4139469664),l=g(l,s,c,o,E[t+10],O,3200236656),o=g(o,l,s,c,E[t+13],N,681279174),c=g(c,o,l,s,E[t+0],B,3936430074),s=g(s,c,o,l,E[t+3],M,3572445317),l=g(l,s,c,o,E[t+6],O,76029189),o=g(o,l,s,c,E[t+9],N,3654602809),c=g(c,o,l,s,E[t+12],B,3873151461),s=g(s,c,o,l,E[t+15],M,530742520),l=g(l,s,c,o,E[t+2],O,3299628645),o=b(o,l,s,c,E[t+0],A,4096336452),c=b(c,o,l,s,E[t+7],V,1126891415),s=b(s,c,o,l,E[t+14],D,2878612391),l=b(l,s,c,o,E[t+5],j,4237533241),o=b(o,l,s,c,E[t+12],A,1700485571),c=b(c,o,l,s,E[t+3],V,2399980690),s=b(s,c,o,l,E[t+10],D,4293915773),l=b(l,s,c,o,E[t+1],j,2240044497),o=b(o,l,s,c,E[t+8],A,1873313359),c=b(c,o,l,s,E[t+15],V,4264355552),s=b(s,c,o,l,E[t+6],D,2734768916),l=b(l,s,c,o,E[t+13],j,1309151649),o=b(o,l,s,c,E[t+4],A,4149444226),c=b(c,o,l,s,E[t+11],V,3174756917),s=b(s,c,o,l,E[t+2],D,718787259),l=b(l,s,c,o,E[t+9],j,3951481745),o=u(o,n),l=u(l,a),s=u(s,r),c=u(c,i);var R=P(o)+P(l)+P(s)+P(c);return R.toLowerCase()},utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}};Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=[];return arguments.length>1&&(n=[].slice.call(arguments,1)),function(){var a=[].slice.call(arguments);return t.apply(e,n.concat(a))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,a=this.length;a>n;n++)if(this[n]===e)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,a=this.length;a>n;++n)e.call(t||this,this[n],n,this)});var s=function(){function e(e,t,n,a){var r=this;if(r.db=e,r.name=t,r.setter=a,"function"!=typeof n)return void(r.data=n);r.getter=n;try{var i=r.getter();i=i&&"object"==typeof i?i:{},r.data=i}catch(o){r.data={}}}function t(e,t,n){var a=this;a.db=e,a.name=t,a.data=n}var n=e.prototype;n.set=function(e,t){var n=this;return n.data[e]=t,n.save(e),n},n.get=function(e){var t=this;return 0===arguments.length?t.data:t.data[e]},n.save=function(e){var t=this,n=t.db;if("function"==typeof t.setter)try{t.setter(e)}catch(a){}return n&&n.save&&n.save(t.name),t},n.list=function(e){var n=this,a=n.data,r=a[e];if(r&&"string"==typeof r)try{r=JSON.parse("["+r+"]")}catch(i){}return a[e]=r instanceof Array?r:[],new t(n,e,a[e])},n.map=function(t){var n=this,a=n.data;return("object"!=typeof a[t]||null===a[t])&&(a[t]={}),new e(n,t,a[t])},n.json=function(t){var n=this,a=n.data;return"string"!=typeof a[t]&&(a[t]="{}"),new e(n,t,function(){var e=a[this.name];return e?JSON.parse(e):null},function(){var e=this;a[e.name]=JSON.stringify(e.data)})},n.toString=function(){return JSON.stringify(this.data)};var a=t.prototype;return a.toString=n.toString,a.get=n.get,a.set=n.set,a.save=n.save,a.kick=function(e){var t=this,n=t.data;return-1==n.indexOf(e)?n.push(e):n.splice(0,n.length,e),t.save(t.name),t},a.push=function(e,t){var n=this,a=n.data;return a.push(e),t&&a.splice(0,a.length-t),n.save(n.name),n},a.touch=function(e){var t=this,n=t.data;return-1===n.indexOf(e)&&n.push(e),t.save(t.name),t},e}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=s);var c=function(){var e=this;e.player=null,e.eventsListener={onPlayerReady:[],onPlayerStart:[],onPlayerStop:[],onPlayerFinish:[],onPlayerError:[],onPlayerSkip:[]},e.init=l.abstractMethod,e.onPlayerReady=l.abstractMethod,e.getCurrentTime=l.abstractMethod,e.getDurationTime=l.abstractMethod,e.addEventListener=function(t,n){if(!e.eventsListener.hasOwnProperty(t))throw"event "+t+" not found";e.eventsListener[t].push(n)},e.addEventListenerOnce=function(t,n){function a(){n&&n(),n=!1}e.addEventListener(t,a)},e.fireEvent=function(t){if(!e.eventsListener.hasOwnProperty(t))throw"event "+t+" not found";var n=e.eventsListener[t].length;if(0!==n){var a=[].slice.call(arguments,1),r=e.eventsListener[t];for(var i in r)r.hasOwnProperty(i)&&r[i].apply(e,a)}}},d=function(){var e=this;e.constructor.superClass_.constructor.call(e),e.init=function(t){e.initApi(function(){e.initPlayer(t)})},e.initApi=function(e){function t(){return"undefined"!=typeof YT&&"undefined"!=typeof YT.Player&&YT.loaded}if(t())return e();var n={enablejsapi:1,version:3,sd:1};l.loadScript("https://www.youtube.com/iframe_api",n);var a=setInterval(function(){t()&&(YT.Player.prototype.playVideo=function(){},clearInterval(a),e())},100)},e.initPlayer=function(t){var n={width:"100%",height:"100%",videoId:t.videoId,playerVars:{wmode:"opaque",html5:1,rel:0,showinfo:0},events:{onReady:e.onPlayerReady.bind(e,t),onError:function(t){e.fireEvent("onPlayerError",t)}}};e.player=new YT.Player(t.target,n)},e.onPlayerReady=function(t){var n=e.player.getIframe();n&&-1!==n.src.indexOf("autoplay")||(e.fireEvent("onPlayerReady"),e.player.addEventListener("onStateChange",function(n){switch(n.data){case 0:e.fireEvent("onPlayerFinish");break;case 1:e.fireEvent("onPlayerStart"),t.quality&&n.target.setPlaybackQuality(t.quality);break;case 2:e.fireEvent("onPlayerStop")}}))},e.getCurrentTime=function(){return e.player.getCurrentTime()},e.getDurationTime=function(){return e.player.getDuration()}};l.inherits(d,c);var u=function(){var n=this;n.constructor.superClass_.constructor.call(n),n.init=function(a){var r=t.createElement("object"),i=l.getGuid();r.type="application/x-shockwave-flash",r.id="rutube-"+i,r.data="http://rutube.ru/player.swf",r.width="100%",r.height="100%";var o={allowScriptAccess:"always",allowFullScreen:"true",wmode:"opaque",bgcolor:"#000000",flashvars:["hash="+a.videoId,"playerId=rutube-"+i,"initJsCallback="+i+".callbackPlayerInit","stateJsCallback="+i+".callbackStateChange","playbackCompleteJsCallback="+i+".callbackPlaybackComplete"].join("&")};for(var s in o){var c=t.createElement("param");c.name=s,c.value=o[s],r.appendChild(c)}a.target.parentNode.replaceChild(r,a.target),n.player=e[i]=n.RutubeWrapper(r),n.onPlayerReady()},n.onPlayerReady=function(){n.fireEvent("onPlayerReady"),n.player.on("start",function(){n.fireEvent("onPlayerStart")}),n.player.on("stop",function(){n.fireEvent("onPlayerStop")}),n.player.on("finish",function(){n.fireEvent("onPlayerFinish")})},n.getCurrentTime=function(){return n.player.getCurrentTime()},n.getDurationTime=function(){return n.player.getDuration()},n.RutubeWrapper=function(e){function t(e){"function"==typeof n[e]&&n[e]()}var n={};return{getCurrentTime:function(){return e.getCurrentTime()},getDuration:function(){return e.getDuration()},on:function(e,t){n[e]=t},callbackStateChange:function(e){switch(e){case"loading":case"ready":case"buffering":break;case"playing":t("start");break;case"paused":case"stopped":t("stop")}},callbackPlayerInit:function(){t("init")},callbackPlaybackComplete:function(){t("finish")}}}};l.inherits(u,c);var p=function(){var e=this;e.constructor.superClass_.constructor.call(e),e.init=function(t){e.initApi(function(){e.initPlayer(t)})},e.initApi=function(e){if("undefined"!=typeof $f)return e();l.loadScript("//a.vimeocdn.com/js/froogaloop2.min.js");var t=setInterval(function(){"undefined"!=typeof $f&&(clearInterval(t),e())},100)},e.initPlayer=function(n){var a=t.createElement("iframe");a.src="http://player.vimeo.com/video/"+n.videoId+"?api=1&player_id="+n.target.id,a.id=n.target.id,a.width="100%",a.height="100%",a.style.borderWidth=0;var r=n.target.parentNode;r.replaceChild(a,n.target),$f(a).addEvent("ready",function(t){e.player=$f(t),e.onPlayerReady.apply(e),e.currentTime=0,e.durationTime=0,e.player.addEvent("playProgress",function(t){e.currentTime=t.seconds}),e.player.api("getDuration",function(t){e.durationTime=t})})},e.onPlayerReady=function(){e.fireEvent("onPlayerReady"),e.player.addEvent("play",function(){e.fireEvent("onPlayerStart")}),e.player.addEvent("pause",function(){e.fireEvent("onPlayerStop")}),e.player.addEvent("finish",function(){e.fireEvent("onPlayerFinish")})},e.getCurrentTime=function(){return e.currentTime},e.getDurationTime=function(){return e.durationTime}};l.inherits(p,c);var f=function(){var e=this,n=null;e.constructor.superClass_.constructor.call(e),e.init=function(t){e.initApi(t,function(){e.initPlayer(t)})},e.initApi=function(e,t){if(l.loadCSS(r+"/videojs-font.css"),l.loadCSS(r+"/videojs.css"),"undefined"!=typeof videojs)return t();l.loadScript(r+"/videojs.js");var n=setInterval(function(){"undefined"!=typeof videojs&&(clearInterval(n),t())},100)},e.initPlayer=function(n){videojs.options.flash.swf=r+"/videojs/video-js.swf";var a={id:"player"+n.target.id,"class":"video-js vjs-vbm-skin vjs-big-play-centered",width:"100%",height:"100%",controls:"",preload:"auto"};(4===n.format||7===n.format)&&delete a.controls,n.previewUrl&&(a.poster=n.previewUrl);var i=t.createElement("video");for(var o in a)i.setAttribute(o,a[o]);var l={"video/mp4":n.hostingUrl+n.videoId+"/854x480.mp4","video/webm":n.hostingUrl+n.videoId+"/854x480.webm"};for(var o in l){var s=t.createElement("source");s.setAttribute("type",o),s.setAttribute("src",l[o]),i.appendChild(s)}n.target.parentNode.replaceChild(i,n.target),e.player=videojs(i),e.$el=e.player.el_,e.onPlayerReady(n)},e.onPlayerReady=function(t){e.fireEvent("onPlayerReady"),e.player.on("play",function(){e.fireEvent("onPlayerStart")}),e.player.on("pause",function(){e.fireEvent("onPlayerStop")}),e.player.on("ended",function(){e.fireEvent("onPlayerFinish")}),e.player.on("error",function(t){e.fireEvent("onPlayerError",t)})},e.getCurrentTime=function(){return e.player.currentTime()},e.getDurationTime=function(){return e.player.duration()},e.play=function(){return e.player.play()},e.pause=function(){return e.player.pause()},e.fluentMute=function(t){function a(){r=e.getVolume()+o,(r>1||0>r)&&(r=i,clearInterval(n),n=null,e.mute(t)),e.player.volume(r)}n&&(clearInterval(n),n=null);var r=0,i=t?0:1,o=.05*(t?-1:1);a(),n=setInterval(a,50),e.player.muted(!1)},e.mute=function(t){return e.player.muted(t)},e.getVolume=function(){return e.player.muted()?0:e.player.volume()}};l.inherits(f,c);var v=function(){function e(t,n,a){l.getJSONP(t,n,function(r){return r instanceof Error?a(r):r?r.code?(n._=Date.now(),e(t,n,a)):void a(null,r):a(null,null)})}function n(e){var n=!1;l.addListener(U,"canplaythrough",function(t){n||(n=!0,e(null))});var a={".aac":"audio/aac",".mp3":"audio/mp3",".ogg":"audio/ogg"};for(var r in a){var i=t.createElement("source");i.setAttribute("type",a[r]),i.setAttribute("src",m.hostingUrl+m.videoId+"/audio"+r),U.appendChild(i)}}function a(t,n,a){var r=m.videoId,i=["vbm",r,"frames",t,E].join("_")+(a?"_"+Date.now():""),o={q:E,callback:i};e(m.cdnDomain+"/video/"+r+"/frames/"+t,o,function(e,t){return e?n(e):void n(null,t)})}function r(e){x=x.concat(e.frames),C=x.length*w/1e3,++T}function i(){return C>=b?void(I=!0):_&&C>=k+_?setTimeout(i,w):void a(T,function(e,t){return e?i():(r(t),void i())})}function o(e){var t=x[e];return t?(F.src="data:"+g+";base64,"+t,!0):!1}function s(){o(0)}function c(){var e=k/b*100,t=C/b*100;D.style.width=e+"%",R.style.width=100-e+"%",j.style.left=e+"%",j.style.width=t-e+"%"}function d(){var e=setInterval(function(){return c(),k=S*w/1e3,k>=b?(L=!0,v.fireEvent("onPlayerFinish"),clearInterval(e)):void(N||(o(S)?(B&&u(),B=!1,++S):(!B&&p(),B=!0)))},w)}function u(e){if(M||N)return!1;var t=U.duration;return t?(void 0!==e&&(e*=t/b,U.currentTime=e),U.play(),!0):!1}function p(){U.pause()}function f(e){var t;return t=e>1.2?h:y}var v=this,m={},y="240p",h="360p",g="",b=0,w=0,P=1,E=h,_=20,C=0,k=0,S=0,T=0,x=[],I=!1,L=!1,N=!0,B=!0,M=!1,O=null,A=t.createElement("div");A.className="vbm-slideshow vbm-slideshow-paused";var V=t.createElement("div");V.className="vbm-slideshow-progress";var D=t.createElement("div");D.className="vbm-slideshow-progress-play";var j=t.createElement("div");j.className="vbm-slideshow-progress-buffer";var R=t.createElement("div");R.className="vbm-slideshow-progress-tail";var H=t.createElement("div");H.className="vbm-slideshow-mute",H.innerHTML='<div><div class="vbm-rect-1"></div><div class="vbm-rect-2"></div><div class="vbm-rect-3"></div><div class="vbm-rect-4"></div></div>';var F=t.createElement("img");F.className="vbm-slideshow-img";var U=t.createElement("audio");U.className="vbm-slideshow-audio",U.preload="auto",U.controls=!0,A.appendChild(F),A.appendChild(H),A.appendChild(U),A.appendChild(V),V.appendChild(R),V.appendChild(j),V.appendChild(D),v.constructor.superClass_.constructor.call(v),v.init=function(e){m=e,O=m.target.parentNode;var t=Date.now();a(0,function(e,n){return e?v.fireEvent("onPlayerError",e):(b=n.duration,g=n.mime,w=n.ms,r(n),P=C/(Date.now()-t)*1e3,E=f(P),console.log("speed",P),console.log("quality",E),void v.initPlayer())},!0),n(function(e){return e?console.log("audio error",e):(console.log("audio ready"),void u(k))})},v.initPlayer=function(){m.target.parentNode.replaceChild(A,m.target),v.$el=A,l.addListener(H,"click",function(){v.mute(!M)}),d(),i(),s(),v.fireEvent("onPlayerReady")},v.getCurrentTime=function(){return k},v.getDurationTime=function(){return b},v.play=function(){console.log("play"),N&&(l.removeClass(A,"vbm-slideshow-paused"),v.fireEvent("onPlayerStart")),N=!1,u(k)},v.pause=function(){console.log("pause"),N||(l.addClass(A,"vbm-slideshow-paused"),v.fireEvent("onPlayerStop")),N=!0,p()},v.mute=function(e){l[e?"addClass":"removeClass"](H,"vbm-slideshow-muted"),M=e,M?p():u(k)},v.getVolume=function(){return M?0:U.volume}};l.inherits(v,c);var m=function(){var n=this;n.constructor.superClass_.constructor.call(n),n.init=function(a){var r=t.createElement("div");r.id="fb-root",t.body.appendChild(r),function(e,t,n){var a,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3",r.parentNode.insertBefore(a,r))}(t,"script","facebook-jssdk");var i="https://www.facebook.com/"+a.videoId.split("_").join("/videos/"),o=t.createElement("div");o.className="fb-video",o.setAttribute("data-href",i),o.setAttribute("data-width",a.width),o.setAttribute("data-height",a.height),a.target.parentNode.replaceChild(o,a.target),n.durationTime=a.duration;var s=setInterval(function(){var a=o.getElementsByTagName("iframe")[0];if(a){clearInterval(s),n.fireEvent("onPlayerReady");var r=0,i=!1;setInterval(function(){r%2&&(n.currentTime+=.1,n.currentTime>n.durationTime&&(r=0,n.currentTime=0,i||n.fireEvent("onPlayerFinish"),i=!0))},100),l.addListener(e,"blur",function(i){t.activeElement===a&&l.isInViewport(a)&&(r%2===0?n.fireEvent("onPlayerStart"):n.fireEvent("onPlayerStop"),++r,setTimeout(function(){a.blur(),e.focus()},100))})}},50)},n.currentTime=0,n.getCurrentTime=function(){return n.currentTime},n.durationTime=0,n.getDurationTime=function(){return n.durationTime}};l.inherits(m,c);var y=function(){var e=this;e.constructor.superClass_.constructor.call(e),e.init=function(n){function a(t){e.fireEvent("onPlayerStart"),r.replaceChild(s,i),setInterval(function(){c%2&&(e.currentTime+=.1,e.currentTime>e.durationTime&&(c=0,e.currentTime=0,d||e.fireEvent("onPlayerFinish"),d=!0))},100),l.addListener(s,"mousedown",function(t){c%2===0?e.fireEvent("onPlayerStart"):e.fireEvent("onPlayerStop"),++c})}var r=n.target.parentNode,i=t.createElement("div"),o=t.createElement("div"),s=t.createElement("embed");s.type="application/x-shockwave-flash",s.width="100%",s.height="100%",s.src=n.videoId,i.style.background="url("+n.previewUrl+"?ts="+Date.now()+") center",i.style.width="100%",i.style.height="100%",i.style.backgroundSize="cover",i.style.cursor="pointer",o.style.background="url(http://st.kp.yandex.net/images/trailer_play.png) center no-repeat",o.style.width="100%",o.style.height="100%",r.replaceChild(i,n.target),i.appendChild(o),e.durationTime=n.duration,e.fireEvent("onPlayerReady");var c=1,d=!1;n.platformType===B?a():l.addListener(i,"click",a)},e.currentTime=0,e.getCurrentTime=function(){return e.currentTime},e.durationTime=0,e.getDurationTime=function(){return e.durationTime}};l.inherits(y,c);var h=function(){var e=this,n=0,a=0;e.constructor.superClass_.constructor.call(e),e.init=function(r){var i=t.createElement("div"),o="vidible_player_"+l.getGuid();return i.style.width="100%",i.style.height="100%",i.innerHTML='<div id="'+o+'" class="vdb_player vdb_'+r.videoId.split("/").join("")+'"></div>',r.target.parentNode.replaceChild(i,r.target),r.ss?(i.style.background="url("+r.previewUrl+") center",i.style.width="100%",i.style.height="100%",i.style.backgroundSize="cover",void e.fireEvent("onPlayerReady")):(l.loadScript("//delivery.vidible.tv/jsonp/pid="+r.videoId+".js"),void function(e,t){if(e.vdb_Player)t(e.vdb_Player);else{var n=arguments.callee;setTimeout(function(){n(e,t)},0)}}(i.firstChild,function(t){function r(){o||(e.fireEvent("onPlayerFinish"),o=!0)}var i=vidible;console.log("vdb",i),t.addEventListener(i.PLAYER_READY,function(t){e.fireEvent("onPlayerReady")}),t.addEventListener(i.VIDEO_PAUSE,function(t){e.fireEvent("onPlayerStop")}),t.addEventListener(i.VIDEO_PLAY,function(t){a=t.data.duration,e.fireEvent("onPlayerStart")}),t.addEventListener(i.VIDEO_TIMEUPDATE,function(e){n=e.data.playheadTime});var o=!1;t.addEventListener(i.VIDEO_END,r),t.addEventListener(i.AD_END,r)}))},e.getCurrentTime=function(){return n},e.getDurationTime=function(){return a}};l.inherits(h,c);var g=1,b=2,w=3,P=4,E=5,_=6,C=7,k="facebook",S="kinopoisk",T="viboom",x="rutube",I="youtube",L="vimeo",N="beon",B="okgroup",M={},O=0,A=[],V=[],D=!1;a.goQueue=function(){setInterval(function(){if("undefined"!=typeof vbm)for(vbm.q=vbm.q||[],vbm.d=vbm.d||[];0!==vbm.q.length;)(function(e){var t=e[0];switch(t){case"get":var r=e[1],i=e[2],o=e[3];"object"==typeof e[1]&&(o=i,i=e[1],r=i.sig);var l=n(i.format),s=new a;if(l===g&&i.id&&V.push(i.id),l===C){s.detectPlace(r,i,o);break}s.getContent(i);break;case"on":var c={id:e[1],name:e[2],handler:e[3]};3===e.length&&(c.handler=c.name,c.name=c.id,c.id=null),A.push(c)}vbm.d.push(e)})(vbm.q.shift())},10)};var j=new s(null,"vbm-storage",function(){var e=localStorage.getItem(this.name);return e?JSON.parse(e):null},function(e,t){localStorage.setItem(this.name,JSON.stringify(this.data))});e.VbmVideo=a,a.goQueue(),o||(l.initYM(),l.loadTNSPixel()),l.loadCSS(r+"/video.css")}var R=null;if(R){var H=new e.VbmVideo;H.getContent(R)}}(window,document);